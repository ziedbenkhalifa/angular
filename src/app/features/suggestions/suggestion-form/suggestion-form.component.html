<div class="container mt-4 mb-5">
  <div class="row">
    <div class="col-md-8 mx-auto">

      <div class="card shadow-lg">
        <div class="card-header bg-success text-white">
          <h3 class="mb-0">➕ Ajouter une nouvelle suggestion</h3>
        </div>

        <div class="card-body p-4">
       
          <form [formGroup]="suggestionForm" (ngSubmit)="onSubmit()">
        
            <div class="mb-3">
              <label for="title" class="form-label">
                Titre : <span class="text-danger">*</span>
              </label>
              <input
                type="text"
                id="title"
                class="form-control"
                formControlName="title"
                placeholder="Entrez le titre de la suggestion"
                [class.is-invalid]="title?.invalid && title?.touched"
                [class.is-valid]="title?.valid && title?.touched">
              
           
              <div *ngIf="title?.invalid && title?.touched" class="invalid-feedback">
                <div *ngIf="title?.errors?.['required']">
                  ⚠️ Le titre est obligatoire.
                </div>
                <div *ngIf="title?.errors?.['minlength']">
                  ⚠️ Le titre doit contenir au minimum 5 caractères.
                </div>
                <div *ngIf="title?.errors?.['pattern']">
                  ⚠️ Le titre doit commencer par une majuscule et ne contenir que des lettres.
                </div>
              </div>
            </div>

    
            <div class="mb-3">
              <label for="description" class="form-label">
                Description : <span class="text-danger">*</span>
              </label>
              <textarea
                id="description"
                class="form-control"
                formControlName="description"
                rows="5"
                placeholder="Décrivez votre suggestion en détail (minimum 30 caractères)"
                [class.is-invalid]="description?.invalid && description?.touched"
                [class.is-valid]="description?.valid && description?.touched">
              </textarea>
              
           
              <div *ngIf="description?.invalid && description?.touched" class="invalid-feedback">
                <div *ngIf="description?.errors?.['required']">
                  ⚠️ La description est obligatoire.
                </div>
                <div *ngIf="description?.errors?.['minlength']">
                  ⚠️ La description doit contenir au minimum 30 caractères.
                  ({{ description?.value?.length || 0 }} / 30)
                </div>
              </div>
              
           
              <small class="text-muted">
                {{ description?.value?.length || 0 }} caractères
              </small>
            </div>

        
            <div class="mb-3">
              <label for="category" class="form-label">
                Catégorie : <span class="text-danger">*</span>
              </label>
              <select
                id="category"
                class="form-select"
                formControlName="category"
                [class.is-invalid]="category?.invalid && category?.touched"
                [class.is-valid]="category?.valid && category?.touched">
                <option value="" disabled selected>-- Sélectionnez une catégorie --</option>
                <option *ngFor="let cat of categories" [value]="cat">
                  {{ cat }}
                </option>
              </select>
              
           
              <div *ngIf="category?.invalid && category?.touched" class="invalid-feedback">
                <div *ngIf="category?.errors?.['required']">
                  ⚠️ La catégorie est obligatoire.
                </div>
              </div>
            </div>

       
            <div class="mb-3">
              <label for="date" class="form-label">Date :</label>
              <input
                type="date"
                id="date"
                class="form-control"
                formControlName="date"
                readonly>
            </div>

          
            <div class="mb-3">
              <label for="status" class="form-label">Status :</label>
              <input
                type="text"
                id="status"
                class="form-control"
                formControlName="status"
                readonly>
            </div>

         
            <div class="d-flex gap-2 justify-content-end mt-4">
              <button
                type="button"
                class="btn btn-secondary btn-lg"
                (click)="onCancel()">
                ❌ Annuler
              </button>
              <button
                type="submit"
                class="btn btn-success btn-lg"
                [disabled]="suggestionForm.invalid">
                ✅ Soumettre
              </button>
            </div>

            <!-- Indicateur de validité du formulaire -->
            <div class="mt-3 text-center">
              <small class="text-muted">
                Formulaire : 
                <span [class.text-success]="suggestionForm.valid" 
                      [class.text-danger]="suggestionForm.invalid">
                  {{ suggestionForm.valid ? '✅ Valide' : '❌ Invalide' }}
                </span>
              </small>
            </div>
          </form>
        </div>
      </div>

     
      <div class="alert alert-info mt-3">
        <strong>ℹ️ Remarque :</strong> Les champs marqués d'un <span class="text-danger">*</span> sont obligatoires.
      </div>
    </div>
  </div>
</div>